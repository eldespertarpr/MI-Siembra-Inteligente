<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mi Siembra Inteligente (v18)</title>

  <!-- PWA -->
  <link rel="manifest" href="manifest.json" />
  <meta name="theme-color" content="#22c55e" />

  <style>
    :root {
      color-scheme: dark;
      --bg: #020617;
      --bg-elevated: #02081f;
      --card: #02081f;
      --card-soft: #030919;
      --accent: #22c55e;
      --accent-soft: rgba(34,197,94,0.15);
      --accent-strong: rgba(34,197,94,0.45);
      --text-main: #f9fafb;
      --text-soft: #9ca3af;
      --border-subtle: rgba(148,163,184,0.3);
      --radius-lg: 16px;
      --radius-xl: 22px;
    }

    body {
      margin: 0;
      font-family: system-ui, sans-serif;
      background: radial-gradient(circle at top, #022c22 0, #020617 55%);
      color: var(--text-main);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    .app-shell {
      max-width: 960px;
      margin: 0 auto;
      padding: 16px 12px 28px;
    }

    /* NAV (igual que tu v17) */
    .nav {
      background: linear-gradient(135deg, var(--bg-elevated), #020617);
      border-radius: 26px;
      padding: 10px;
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
      position: sticky;
      top: 0;
      z-index: 40;
      backdrop-filter: blur(16px);
      border: 1px solid rgba(15,23,42,0.85);
    }

    .nav-btn {
      border: none;
      background: transparent;
      color: var(--text-soft);
      font-size: 0.75rem;
      border-radius: 999px;
      padding: 6px 4px;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      cursor: pointer;
    }

    .nav-btn--active {
      background: radial-gradient(circle at top, var(--accent), var(--accent-soft));
      color: white;
    }

    /* Secciones */
    .section { display: none; }
    .section--active { display: block; }

    /* ------------------------------ */
    /* üî• CAT√ÅLOGO COMPACTO (Opci√≥n A) */
    /* ------------------------------ */

    .catalogo-lista {
      display: flex;
      flex-direction: column;
      gap: 10px;
      margin-top: 8px;
    }

    .catalogo-item {
      display: flex;
      gap: 12px;
      padding: 10px;
      border-radius: var(--radius-lg);
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(55,65,81,0.8);
      box-shadow: 0 6px 16px rgba(0,0,0,0.3);
      align-items: center;
    }

    .catalogo-img {
      width: 64px;
      height: 64px;
      border-radius: 12px;
      object-fit: cover;
      border: 1px solid rgba(148,163,184,0.4);
    }

    .catalogo-info {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 3px;
    }

    .catalogo-nombre {
      font-size: 1rem;
      font-weight: 600;
      color: #bbf7d0;
      text-transform: capitalize;
    }

    .catalogo-detalle {
      font-size: 0.78rem;
      color: var(--text-soft);
      line-height: 1.2;
    }

    .chip-mini {
      display: inline-block;
      background: rgba(34,197,94,0.2);
      color: #bbf7d0;
      padding: 2px 6px;
      border-radius: 999px;
      font-size: 0.65rem;
      margin-right: 4px;
      border: 1px solid rgba(34,197,94,0.4);
    }
  </style>
</head>
  <script>
/* ============================================================
   MI SIEMBRA INTELIGENTE ‚Äì SCRIPT PRINCIPAL
   PARTE 3A ‚Äì CONSTANTES, UTILIDADES, ESTADOS
============================================================ */

/* ============================
   Claves de almacenamiento
============================ */
const STORAGE_KEYS = {
  settings: "msi-settings",
  cultivos: "msi-cultivos",
  diario:   "msi-diario"
};

/* ============================
   Ajustes por defecto
============================ */
const DEFAULT_SETTINGS = {
  nombreHuerto: "Mi huerto",
  clima: "tropical",
  hemisferio: "norte"
};

/* ============================
   Etiquetas amigables
============================ */
const CLIMA_LABEL = {
  tropical: "tropical",
  subtropical: "subtropical/templado",
  templado: "templado/fr√≠o"
};

const HEMISFERIO_LABEL = {
  norte: "hemisferio norte",
  sur: "hemisferio sur"
};

/* ============================
   FUNCIONES ‚Äì almacenamiento
============================ */
function loadSettings() {
  try {
    const raw = localStorage.getItem(STORAGE_KEYS.settings);
    if (!raw) return { ...DEFAULT_SETTINGS };
    return { ...DEFAULT_SETTINGS, ...JSON.parse(raw) };
  } catch {
    return { ...DEFAULT_SETTINGS };
  }
}

function saveSettings(v) {
  localStorage.setItem(STORAGE_KEYS.settings, JSON.stringify(v));
}

function loadCultivos() {
  try {
    return JSON.parse(localStorage.getItem(STORAGE_KEYS.cultivos)) || [];
  } catch {
    return [];
  }
}

function saveCultivos(v) {
  localStorage.setItem(STORAGE_KEYS.cultivos, JSON.stringify(v));
}

function loadDiario() {
  try {
    return JSON.parse(localStorage.getItem(STORAGE_KEYS.diario)) || [];
  } catch {
    return [];
  }
}

function saveDiario(v) {
  localStorage.setItem(STORAGE_KEYS.diario, JSON.stringify(v));
}

/* ============================
   Utilidades de fecha
============================ */
function todayISO() {
  return new Date().toISOString().slice(0, 10);
}

function formatDate(dateStr) {
  if (!dateStr) return "Sin fecha";
  const d = new Date(dateStr + "T00:00:00");
  if (isNaN(d.getTime())) return dateStr;
  const meses = ["ene","feb","mar","abr","may","jun","jul","ago","sep","oct","nov","dic"];
  return `${d.getDate().toString().padStart(2,"0")} ${meses[d.getMonth()]} ${d.getFullYear()}`;
}

/* ============================
   ESTADO GLOBAL DE LA APP
============================ */
let stateSettings = loadSettings();
let stateCultivos = loadCultivos();
let stateDiario   = loadDiario();

/* ============================================================
   FIN DE PARTE 3A
   ‚¨ÜÔ∏è Pega SOLO esto en tu archivo.
   Me dices ‚ÄúLISTO‚Äù para enviarte la PARTE 3B.
============================================================ */
    <!-- ================================
     PARTE 3B ‚Äì RENDER DE INTERFAZ
================================ -->
<!-- ===========================================
     PARTE 3C ‚Äì HUERTO / DIARIO / PLAGAS / CAT√ÅLOGO
=========================================== -->

<script>
/* ============================================================
   RENDER ‚Äì MI HUERTO (Tarjetas)
============================================================ */
function renderCultivos() {
  const list = document.getElementById("cultivosList");
  const chip = document.getElementById("cultivosCountChip");
  if (!list) return;

  const arr = stateCultivos;
  const count = arr.length;

  chip.textContent = `${count} cultivo${count === 1 ? "" : "s"}`;

  if (count === 0) {
    list.innerHTML = `<p class="muted">Todav√≠a no has registrado cultivos.</p>`;
    return;
  }

  list.innerHTML = "";

  arr.forEach(c => {
    const card = document.createElement("div");
    card.className = "cultivo-card";

    const tipoMap = {
      hoja: "Hoja", fruto: "Fruto", raiz: "Ra√≠z", tuberculo: "Tub√©rculo",
      aromaticas: "Arom√°ticas", otro: "Otro", bulbo: "Bulbo"
    };

    card.innerHTML = `
      <div class="cultivo-header">
        <div class="cultivo-title"><span>üåø</span>${c.nombre}</div>
        <span class="chip">${tipoMap[c.tipo] || "Otro"}</span>
      </div>

      <div class="cultivo-body">
        <div><strong>Variedad:</strong> ${c.variedad || "‚Äî"}</div>
        <div><strong>Siembra:</strong> ${formatDate(c.fechaSiembra)}</div>
        <div><strong>Notas:</strong> ${c.notas ? c.notas.slice(0,80) : "‚Äî"}</div>
        <div><strong>Creado:</strong> ${formatDate(c.creadoEl)}</div>
      </div>

      ${c.notas ? `<div class="cultivo-notas"><strong>Notas:</strong> ${c.notas}</div>` : ""}

      <div class="cultivo-actions">
        <button class="btn-secondary btn" data-id="${c.id}" data-action="nota">‚úèÔ∏è Nota</button>
        <button class="btn-danger btn" data-id="${c.id}" data-action="borrar">üóë Borrar</button>
      </div>
    `;

    list.appendChild(card);
  });
}

/* ============================================================
   RENDER ‚Äì DIARIO
============================================================ */
function renderDiario() {
  const list = document.getElementById("diarioList");
  const chip = document.getElementById("diarioCountChip");
  if (!list) return;

  const arr = [...stateDiario].sort((a,b) => b.fecha.localeCompare(a.fecha));
  const count = arr.length;

  chip.textContent = `${count} entrada${count === 1 ? "" : "s"}`;

  if (count === 0) {
    list.innerHTML = `<p class="muted">No hay entradas a√∫n.</p>`;
    return;
  }

  list.innerHTML = "";

  arr.slice(0,25).forEach(item => {
    const div = document.createElement("div");
    div.className = "diario-item";

    div.innerHTML = `
      <div class="diario-item-header">
        <strong>${formatDate(item.fecha)}</strong>
        <span class="chip">${item.tipo || "General"}</span>
      </div>
      <div>${item.texto}</div>
    `;

    list.appendChild(div);
  });
}

/* ============================================================
   RENDER ‚Äì PLAGAS
============================================================ */
function renderPlagas() {
  const list = document.getElementById("plagasList");
  if (!list) return;

  const data = [
    {
      nombre: "Pulgones",
      detalle: "Peque√±os insectos que chupan savia.",
      manejo: "Jab√≥n pot√°sico, agua con ajo o aj√≠."
    },
    {
      nombre: "Mosca blanca",
      detalle: "Al mover la planta salen volando.",
      manejo: "Trampas amarillas, neem suave."
    },
    {
      nombre: "Orugas",
      detalle: "Hojas mordidas o agujeros grandes.",
      manejo: "Retirar a mano. Bacillus thuringiensis."
    },
    {
      nombre: "Caracoles y babosas",
      detalle: "Babas plateadas y mordidas irregulares.",
      manejo: "Barreras f√≠sicas y recolecci√≥n nocturna."
    }
  ];

  list.innerHTML = "";

  data.forEach(p => {
    const div = document.createElement("div");
    div.innerHTML = `
      <div class="media-item-title">üêõ ${p.nombre}</div>
      <div class="media-item-body"><strong>Descripci√≥n:</strong> ${p.detalle}</div>
      <div class="media-item-body"><strong>Manejo:</strong> ${p.manejo}</div>
    `;
    list.appendChild(div);
  });
}

/* ============================================================
   RENDER ‚Äì PESTICIDAS
============================================================ */
function renderPesticidas() {
  const list = document.getElementById("pesticidasList");
  if (!list) return;

  const data = [
    { nombre: "Jab√≥n pot√°sico", detalle: "Contra pulgones y mosca blanca." },
    { nombre: "Aceite de neem", detalle: "Disminuye ciclos reproductivos." },
    { nombre: "Ajo + Aj√≠", detalle: "Infusi√≥n repelente casera." }
  ];

  list.innerHTML = "";

  data.forEach(p => {
    const div = document.createElement("div");
    div.innerHTML = `
      <div class="media-item-title">üíß ${p.nombre}</div>
      <div class="media-item-body">${p.detalle}</div>
    `;
    list.appendChild(div);
  });
}

/* ============================================================
   RENDER ‚Äì CAT√ÅLOGO COMPLETO (40 cultivos + b√∫squeda)
============================================================ */
function renderCatalogo() {
  const cont = document.getElementById("catalogoList");
  if (!cont) return;

  cont.innerHTML = "";

  // Barra de b√∫squeda
  const search = document.createElement("input");
  search.type = "text";
  search.placeholder = "Buscar cultivo...";
  search.className = "search-input";
  search.style.width = "100%";
  search.style.padding = "10px";
  search.style.marginBottom = "10px";
  search.style.borderRadius = "14px";
  search.style.background = "rgba(15,23,42,0.95)";
  search.style.border = "1px solid rgba(148,163,184,0.4)";
  search.style.color = "white";

  cont.appendChild(search);

  // Contenedor de tarjetas
  const lista = document.createElement("div");
  lista.style.display = "flex";
  lista.style.flexDirection = "column";
  lista.style.gap = "14px";
  cont.appendChild(lista);

  // Dibujo de tarjetas
  function draw(filter = "") {
    lista.innerHTML = "";

    const data = CULTIVOS.filter(c =>
      c.nombre.toLowerCase().includes(filter.toLowerCase())
    );

    if (!data.length) {
      lista.innerHTML = `<p class="muted">No se encontraron cultivos.</p>`;
      return;
    }

    data.forEach(c => {
      const card = document.createElement("div");
      card.className = "app-card";

      const img = c.imagen || "img/placeholder.jpg";

      card.innerHTML = `
        <img src="${img}" 
             onerror="this.src='img/placeholder.jpg'" 
             style="width:100%;height:180px;object-fit:cover;border-radius:14px;margin-bottom:8px;">

        <h3 style="margin:0 0 6px;font-size:1rem;">
          ${c.nombre.charAt(0).toUpperCase() + c.nombre.slice(1)}
        </h3>

        <p class="muted"><strong>Tipo:</strong> ${c.tipo}</p>
        <p class="muted"><strong>Sol:</strong> ${c.sol}</p>
        <p class="muted"><strong>Profundidad:</strong> ${c.profundidad}</p>
        <p class="muted"><strong>Distancia:</strong> ${c.distancia}</p>
        <p class="muted"><strong>Meses:</strong> ${c.meses.map(m => m+1).join(", ")}</p>
        <p class="muted"><strong>Plagas:</strong> ${c.plagas.join(", ")}</p>
        <p class="muted"><strong>Notas:</strong> ${c.notas}</p>
      `;

      lista.appendChild(card);
    });
  }

  draw(); // inicial

  search.addEventListener("input", () => {
    draw(search.value);
  });
}

/* ============================================================
   FIN DE PARTE 3C
   Despu√©s viene: navegaci√≥n + formularios + PWA
============================================================ */
<script>
/* ============================================================
   ACTUALIZAR ENCABEZADO Y CHIPS
============================================================ */

function updateHeader() {
  const subtitle = document.getElementById("appSubtitle");
  const nombre = stateSettings.nombreHuerto;
  const clima = CLIMA_LABEL[stateSettings.clima];
  const hemis = HEMISFERIO_LABEL[stateSettings.hemisferio];

  subtitle.innerHTML = `
    <span>Huerto "<strong>${nombre}</strong>"</span>
    <span class="app-subtitle-dot"></span>
    <span>clima ${clima}</span>
    <span class="app-subtitle-dot"></span>
    <span>${hemis}</span>
  `;
}

function updateSettingsContexts() {
  const nombre = stateSettings.nombreHuerto;
  const clima = CLIMA_LABEL[stateSettings.clima];
  const hemis = HEMISFERIO_LABEL[stateSettings.hemisferio];

  document.querySelectorAll(".settings-context").forEach(el => {
    el.innerHTML = `
      <span class="chip"><span>üåø</span> Huerto: ${nombre}</span>
      <span class="chip"><span>‚òÅÔ∏è</span> Clima: ${clima}</span>
      <span class="chip"><span>üß≠</span> ${hemis}</span>
    `;
  });

  const climaText = `Clima ${clima}`;
  const estadoChip = document.getElementById("estadoClimaChip");
  const calChip = document.getElementById("calendarioClimaChip");
  const calChip2 = document.getElementById("calendarioClimaChip2");

  if (estadoChip) estadoChip.textContent = climaText;
  if (calChip) calChip.textContent = climaText;
  if (calChip2) calChip2.textContent = climaText;
}

/* ============================================================
   RENDER ‚Äì INICIO (DASHBOARD)
============================================================ */
function renderInicio() {
  const cultivos = stateCultivos;
  const diario = stateDiario;
  const nombre = stateSettings.nombreHuerto;

  // Totales
  document.getElementById("estadoCultivosCount").textContent = cultivos.length;
  const hoy = todayISO();
  const entradasHoy = diario.filter(x => x.fecha === hoy).length;
  document.getElementById("estadoEntradasCount").textContent = entradasHoy;

  // Resumen
  const resumen = document.getElementById("estadoResumen");

  if (!cultivos.length && !entradasHoy) {
    resumen.textContent =
      `A√∫n no has registrado cultivos ni notas. Empieza en "Mi huerto".`;
  } else if (cultivos.length && !entradasHoy) {
    resumen.textContent =
      `Tienes ${cultivos.length} cultivo(s) registrado(s). A√∫n no has escrito en el diario hoy.`;
  } else if (cultivos.length && entradasHoy) {
    resumen.textContent =
      `Tienes ${cultivos.length} cultivo(s) y ${entradasHoy} nota(s) hoy. ¬°Buen trabajo!`;
  } else {
    resumen.textContent =
      `Hay notas en el diario pero ning√∫n cultivo registrado a√∫n.`;
  }

  // Sugerencias para HOY en calendario
  const now = new Date();
  const monthIndex = now.getMonth();
  const data = getCalendarData(stateSettings, monthIndex);

  const textoHoy = document.getElementById("calendarioHoyTexto");

  if (!data.length) {
    textoHoy.textContent =
      `Este mes no tiene sugerencias espec√≠ficas seg√∫n tu clima.`;
  } else {
    textoHoy.textContent =
      `Sugerencias de siembra este mes: ${data.map(x => x.titulo).join(", ")}.`;
  }
}

/* ============================================================
   RENDER ‚Äì CALENDARIO DE SIEMBRA
============================================================ */
function renderCalendario(monthIndex = 0) {
  const list = document.getElementById("calendarList");
  const empty = document.getElementById("calendarEmpty");

  list.innerHTML = "";
  empty.style.display = "none";

  const data = getCalendarData(stateSettings, monthIndex);

  if (!data.length) {
    empty.style.display = "block";
    return;
  }

  data.forEach(item => {
    const div = document.createElement("div");
    div.className = "calendar-item";
    div.innerHTML = `
      <div class="calendar-item-title">
        <span>${item.titulo}</span>
        <span class="chip">${item.tipo}</span>
      </div>
      <div>${item.detalle}</div>
    `;
    list.appendChild(div);
  });
}

/* ============================================================
   FIN DE PARTE 3B
   ‚¨ÜÔ∏è Pega esta parte justo debajo de la 3A
============================================================ */
    <!-- ===========================================
     PARTE 3D ‚Äì NAVEGACI√ìN + FORMULARIOS + INICIO
=========================================== -->

<script>
/* ============================================================
   UTILIDADES
============================================================ */
function formatDate(str) {
  if (!str) return "‚Äî";
  const d = new Date(str);
  return d.toLocaleDateString("es-PR", {
    year: "numeric", month: "short", day: "numeric"
  });
}

/* ============================================================
   NAVEGACI√ìN ENTRE SECCIONES
============================================================ */
function showSection(id) {
  document.querySelectorAll(".section").forEach(s => s.classList.add("hidden"));
  const sec = document.getElementById(id);
  if (sec) sec.classList.remove("hidden");

  window.scrollTo(0, 0);
}

document.querySelectorAll("[data-nav]").forEach(btn => {
  btn.addEventListener("click", () => {
    const target = btn.dataset.nav;
    showSection(target);
  });
});

/* ============================================================
   BOT√ìN: NUEVO CULTIVO (Formulario)
============================================================ */
document.getElementById("btnAddCultivo")?.addEventListener("click", () => {
  showSection("section-newcultivo");
});

document.getElementById("formCultivo")?.addEventListener("submit", e => {
  e.preventDefault();

  const nombre = document.getElementById("fNombre").value.trim();
  const variedad = document.getElementById("fVariedad").value.trim();
  const fecha = document.getElementById("fFecha").value;
  const notas = document.getElementById("fNotas").value.trim();
  const tipo = document.getElementById("fTipo").value;

  if (!nombre || !fecha) {
    alert("Por favor completa al menos nombre y fecha.");
    return;
  }

  const nuevo = {
    id: Date.now(),
    nombre,
    variedad,
    fechaSiembra: fecha,
    notas,
    tipo,
    creadoEl: new Date().toISOString()
  };

  stateCultivos.push(nuevo);
  saveState();
  renderCultivos();

  showSection("section-cultivos");
});

/* ============================================================
   BOT√ìN: NOTA R√ÅPIDA A UN CULTIVO
============================================================ */
document.addEventListener("click", e => {
  const btn = e.target.closest("[data-action]");
  if (!btn) return;

  const id = btn.dataset.id;
  const action = btn.dataset.action;

  if (action === "nota") {
    const item = stateCultivos.find(c => c.id == id);
    if (!item) return;

    const t = prompt("A√±adir nota:", item.notas || "");
    if (t === null) return;

    item.notas = t;
    saveState();
    renderCultivos();
  }

  if (action === "borrar") {
    if (!confirm("¬øEliminar este cultivo?")) return;
    const idx = stateCultivos.findIndex(c => c.id == id);
    if (idx >= 0) {
      stateCultivos.splice(idx, 1);
      saveState();
      renderCultivos();
    }
  }
});

/* ============================================================
   DIARIO ‚Äì NUEVA ENTRADA
============================================================ */
document.getElementById("btnAddDiario")?.addEventListener("click", () => {
  const texto = prompt("Escribe tu entrada del diario:");
  if (!texto) return;

  stateDiario.push({
    id: Date.now(),
    fecha: new Date().toISOString(),
    texto,
    tipo: "General"
  });

  saveState();
  renderDiario();
});

/* ============================================================
   CAMBIO DE CLIMA
============================================================ */
document.querySelectorAll(".clima-btn")?.forEach(btn => {
  btn.addEventListener("click", () => {
    stateConfig.clima = btn.dataset.clima;
    saveState();
    document.getElementById("climaActual").textContent =
      stateConfig.clima.toUpperCase();
  });
});

/* ============================================================
   AUTOAJUSTE A PANTALLA ‚Äî ESTILO VERSI√ìN 17
============================================================ */
function ajustarTama√±o() {
  document.documentElement.style.height = window.innerHeight + "px";
}

window.addEventListener("resize", ajustarTama√±o);
ajustarTama√±o();

/* ============================================================
   RESTAURAR / BACKUP
============================================================ */
document.getElementById("btnExport")?.addEventListener("click", () => {
  const data = {
    cultivos: stateCultivos,
    diario: stateDiario,
    config: stateConfig
  };

  const blob = new Blob([JSON.stringify(data)], { type: "application/json" });
  const url = URL.createObjectURL(blob);

  const a = document.createElement("a");
  a.href = url;
  a.download = "mis-siembra-backup.json";
  a.click();
});

document.getElementById("btnImport")?.addEventListener("click", () => {
  document.getElementById("backupFile").click();
});

document.getElementById("backupFile")?.addEventListener("change", e => {
  const file = e.target.files[0];
  if (!file) return;

  const reader = new FileReader();
  reader.onload = () => {
    try {
      const data = JSON.parse(reader.result);
      if (data.cultivos) stateCultivos = data.cultivos;
      if (data.diario) stateDiario = data.diario;
      if (data.config) stateConfig = data.config;
      saveState();

      iniciarApp();
    } catch {
      alert("Archivo inv√°lido.");
    }
  };

  reader.readAsText(file);
});

/* ============================================================
   BORRAR TODO
============================================================ */
document.getElementById("btnReset")?.addEventListener("click", () => {
  if (!confirm("¬øSeguro que deseas borrar todos los datos?")) return;

  localStorage.removeItem("msi_cultivos");
  localStorage.removeItem("msi_diario");
  localStorage.removeItem("msi_config");

  stateCultivos = [];
  stateDiario = [];
  stateConfig = { clima: "tropical" };

  iniciarApp();
});

/* ============================================================
   INICIALIZACI√ìN GENERAL
============================================================ */
function iniciarApp() {
  document.getElementById("climaActual").textContent =
    stateConfig.clima.toUpperCase();

  renderCultivos();
  renderDiario();
  renderPlagas();
  renderPesticidas();
  renderCatalogo();
}

iniciarApp();

/* ============================================================
   FIN PARTE 3D
============================================================ */
  </script>
<body>
<div class="app-shell">
<!-- HEADER -->
    <header class="app-header">
      <div class="app-header-icon">
        <span>üå±</span>
      </div>
      <div class="app-header-text">
        <div class="app-title-row">
          <div class="app-title">Mi Siembra Inteligente</div>
          <div class="app-tag">v18 ¬∑ PWA</div>
        </div>
        <div class="app-subtitle" id="appSubtitle"></div>
      </div>
    </header>

    <!-- NAV -->
    <nav class="nav">
      <button class="nav-btn nav-btn--active" data-section="inicio">
        <span class="nav-icon">üè†</span>
        <span class="nav-label">Inicio</span>
      </button>

      <button class="nav-btn" data-section="calendario">
        <span class="nav-icon">üìÖ</span>
        <span class="nav-label">Calendario</span>
      </button>

      <button class="nav-btn" data-section="huerto">
        <span class="nav-icon">üåø</span>
        <span class="nav-label">Mi huerto</span>
      </button>

      <button class="nav-btn" data-section="diario">
        <span class="nav-icon">üìì</span>
        <span class="nav-label">Diario</span>
      </button>

      <button class="nav-btn" data-section="plagas">
        <span class="nav-icon">üêõ</span>
        <span class="nav-label">Plagas</span>
      </button>

      <button class="nav-btn" data-section="pesticidas">
        <span class="nav-icon">üíß</span>
        <span class="nav-label">Pesticidas</span>
      </button>

      <button class="nav-btn" data-section="opciones">
        <span class="nav-icon">‚öôÔ∏è</span>
        <span class="nav-label">Opciones</span>
      </button>

      <button class="nav-btn" data-section="catalogo">
        <span class="nav-icon">üå±</span>
        <span class="nav-label">Cat√°logo</span>
      </button>
    </nav>

    <main>

      <!-- üîπ SECCI√ìN INICIO -->
      <section id="section-inicio" class="section section--active">
        <h2>Inicio</h2>
        <p class="section-subtitle">Resumen r√°pido del huerto.</p>
        <div class="app-card">
          <div class="app-card-header">
            <div class="app-card-title">Estado r√°pido</div>
            <div class="chip badge" id="estadoClimaChip">Clima tropical</div>
          </div>

          <div class="context-chips settings-context"></div>

          <div class="grid-two">
            <div>
              <div class="small-label">Cultivos registrados</div>
              <div class="big-number" id="estadoCultivosCount">0</div>
            </div>
            <div>
              <div class="small-label">Entradas hoy</div>
              <div class="big-number" id="estadoEntradasCount">0</div>
            </div>
          </div>

          <div class="divider-soft"></div>
          <p class="muted" id="estadoResumen"></p>

          <div class="pill-group">
            <button class="btn-secondary btn" id="btnIrMiHuerto">
              <span>üåø</span> Ir a "Mi huerto"
            </button>
            <button class="btn-secondary btn" id="btnIrDiario">
              <span>‚úèÔ∏è</span> Escribir en diario
            </button>
            <button class="btn-secondary btn" id="btnIrClima">
              <span>‚öôÔ∏è</span> Ajustar clima
            </button>
          </div>
        </div>
      </section>

      <!-- üîπ SECCI√ìN CALENDARIO -->
      <section id="section-calendario" class="section">
        <h2>Calendario de siembra</h2>
        <p class="section-subtitle">Selecciona un mes para ver qu√© sembrar.</p>

        <div class="app-card">
          <div class="app-card-header">
            <div class="app-card-title">Meses del a√±o</div>
            <div class="chip" id="calendarioClimaChip2">Clima tropical</div>
          </div>

          <div class="pill-group" id="mesesPills">
            <button class="pill" data-mes="0">Ene</button>
            <button class="pill" data-mes="1">Feb</button>
            <button class="pill" data-mes="2">Mar</button>
            <button class="pill" data-mes="3">Abr</button>
            <button class="pill" data-mes="4">May</button>
            <button class="pill pill--active" data-mes="5">Jun</button>
            <button class="pill" data-mes="6">Jul</button>
            <button class="pill" data-mes="7">Ago</button>
            <button class="pill" data-mes="8">Sep</button>
            <button class="pill" data-mes="9">Oct</button>
            <button class="pill" data-mes="10">Nov</button>
            <button class="pill" data-mes="11">Dic</button>
          </div>

          <div id="calendarList" class="calendar-list"></div>
          <div id="calendarEmpty" class="calendar-empty" style="display:none;">
            No hay recomendaciones para este mes.
          </div>
        </div>
      </section>

      <!-- üîπ SECCI√ìN HUERTO (igual a tu v17) -->
      <section id="section-huerto" class="section">
        <h2>Mi huerto</h2>
        <p class="section-subtitle">Registra y administra tus cultivos.</p>

        <div class="app-card">
          <div class="app-card-header">
            <div class="app-card-title">Nuevo cultivo</div>
          </div>

          <div class="form-grid form-grid--2">
            <div class="field">
              <label>Nombre *</label>
              <input type="text" id="cultivoNombre" />
            </div>
            <div class="field">
              <label>Variedad</label>
              <input type="text" id="cultivoVariedad" />
            </div>
          </div>

          <div class="form-grid form-grid--2">
            <div class="field">
              <label>Tipo</label>
              <select id="cultivoTipo">
                <option value="hoja">Hoja</option>
                <option value="fruto">Fruto</option>
                <option value="raiz">Ra√≠z</option>
                <option value="tuberculo">Tub√©rculo</option>
                <option value="aromaticas">Arom√°ticas</option>
                <option value="otro">Otro</option>
              </select>
            </div>
            <div class="field">
              <label>Fecha</label>
              <input type="date" id="cultivoFecha" />
            </div>
          </div>

          <div class="field">
            <label>Notas</label>
            <textarea id="cultivoNotas"></textarea>
          </div>

          <button class="btn btn-full" id="btnAgregarCultivo">
            <span>‚ûï</span> Guardar cultivo
          </button>
        </div>

        <div class="app-card">
          <div class="app-card-header">
            <div class="app-card-title">Cultivos registrados</div>
            <div class="chip" id="cultivosCountChip">0</div>
          </div>
          <div id="cultivosList" class="cultivos-list"></div>
        </div>
      </section>

      <!-- üîπ SECCI√ìN DIARIO -->
      <section id="section-diario" class="section">
        <h2>Diario</h2>
        <div class="app-card">
          <div class="app-card-header">
            <div class="app-card-title">Nueva entrada</div>
          </div>

          <textarea id="diarioTexto" placeholder="Ej. Regu√© tomates..."></textarea>

          <button class="btn btn-full" id="btnGuardarDiario">
            <span>üíæ</span> Guardar entrada
          </button>
        </div>

        <div class="app-card">
          <div class="app-card-header">
            <div class="app-card-title">Entradas</div>
            <div class="chip" id="diarioCountChip">0</div>
          </div>
          <div id="diarioList" class="diario-list"></div>
        </div>
      </section>

      <!-- üîπ SECCI√ìN PLAGAS -->
      <section id="section-plagas" class="section">
        <h2>Plagas comunes</h2>
        <div class="media-list" id="plagasList"></div>
      </section>

      <!-- üîπ SECCI√ìN PESTICIDAS -->
      <section id="section-pesticidas" class="section">
        <h2>Pesticidas y preparados</h2>
        <div class="media-list" id="pesticidasList"></div>
      </section>

      <!-- üîπ SECCI√ìN OPCIONES -->
      <section id="section-opciones" class="section">
        <h2>Opciones</h2>

        <div class="field">
          <label>Nombre del huerto</label>
          <input type="text" id="nombreHuerto" />
        </div>

        <div class="form-grid form-grid--2">
          <div class="field">
            <label>Clima</label>
            <select id="climaSelect">
              <option value="tropical">Tropical</option>
              <option value="subtropical">Subtropical</option>
              <option value="templado">Templado</option>
            </select>
          </div>

          <div class="field">
            <label>Hemisferio</label>
            <select id="hemisferioSelect">
              <option value="norte">Norte</option>
              <option value="sur">Sur</option>
            </select>
          </div>
        </div>

        <button class="btn btn-full" id="btnGuardarConfig">
          <span>üíæ</span> Guardar configuraci√≥n
        </button>
      </section>

      <!-- üå± NUEVA SECCI√ìN: CAT√ÅLOGO DE CULTIVOS (compacto) -->
      <section id="section-catalogo" class="section">
        <h2>Cat√°logo de cultivos</h2>
        <p class="section-subtitle">Informaci√≥n r√°pida: sol, meses, distancia y plagas.</p>

        <div class="app-card">
          <div class="app-card-header">
            <div class="app-card-title">Cultivos disponibles</div>
            <div class="chip">40 cultivos</div>
          </div>

          <input type="text" id="catalogoBuscar" placeholder="Buscar cultivo..." 
            style="width:100%; padding:10px; border-radius:12px; margin-bottom:12px;
            background:rgba(15,23,42,0.9); border:1px solid rgba(148,163,184,0.4); color:white;">

          <div id="catalogoList" class="catalogo-lista"></div>
        </div>
      </section>

    </main>

    <footer>
      <span>Mi Siembra Inteligente ¬∑ Datos locales ¬∑ üåø</span>
    </footer>
